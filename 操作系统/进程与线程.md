### 一.进程和线程的区别

- 进程是系统进行资源分配的最小单位，它就是一个正在执行程序的实例，由进程控制块+程序块+数据块组成
- 线程是CPU调度和分配的最小单位，它基本上不拥有系统资源，只拥有一些在运行中必不可少的资源（如：程序计数器、寄存器和栈），它比进程更能显著滴提高系统的并发程度
- 一个进程可包括多个线程，同一个进程中的多个线程之间可以并发执行，多个线程共享进程中的数据
- 一个线程可以创建和撤销另一个线程
- 进程中的任意一线程执行出错，都会导致整个进程的崩溃；进程之间的内容相互隔离，所以一个进程如果崩溃了，或者挂起了，是不会影响到其他进程的
- 由于在创建或撤消进程时，系统都要为之分配或回收资源，因此，操作系统所付出的开销将显著地大于在创建或撤消线程时的开销。 进程切换的开销也远大于线程切换的开销。

### 二.进程的通信方式

- 管道/匿名管道(pipe)

- 有名管道(FIFO)

- 信号（signal）

- 消息队列

  消息队列，就是一个消息的链表，是一系列保存在内核中消息的列表。用户进程可以向消息队列添加消息，也可以向消息队列读取消息。

  消息队列与管道通信相比，其优势是对每个消息指定特定的消息类型，接收的时候不需要按照队列次序，而是可以根据自定义条件接收特定类型的消息。

  可以把消息看做一个记录，具有特定的格式以及特定的优先级。对消息队列有写权限的进程可以向消息队列中按照一定的规则添加新消息，对消息队列有读权限的进程可以从消息队列中读取消息。

- 共享内存

  **共享内存**这个通信方式就可以很好着解决拷贝所消耗的时间了。系统加载一个进程的时候，分配给进程的内存并不是实际物理内存，而是虚拟内存空间。那么我们可以让两个进程各自拿出一块虚拟地址空间来，然后映射到相同的物理内存中，这样，两个进程虽然有着独立的虚拟内存空间，但有一部分却是映射到相同的物理内存，这就完成了内存共享机制了。

- 信号量

  信号量的本质就是一个计数器，用来实现进程之间的互斥与同步。例如信号量的初始值是 1，然后 a 进程来访问**内存1**的时候，我们就把信号量的值设为 0，然后进程b 也要来访问**内存1**的时候，看到信号量的值为 0 就知道已经有进程在访问**内存1**了，这个时候进程 b 就会访问不了**内存1**。所以说，信号量也是进程之间的一种通信方式。

- 套接字

具体参考链接：https://www.jianshu.com/p/c1015f5ffa74

### 三.线程的分类

**用户级线程：**

- 对于这种线程的创建、撤消、和切换，由用户程序来实现（由应用程序完成所有线程的管理）
- 内核并不知道用户级线程的存在。

**内核级线程：**

- 它们是依赖于内核的，即无论是用户进程中的线程，还是系统进程中的线程，它们的创建、撤消、切换都由内核实现。

### 四.处理机调度

#### 1.高级调度（作业调度）

##### 概念

作业调度是按一定的算法从磁盘上选择资源能得到满足的作业装入内存，使作业有机会去占用处理器执行。但是，一个作业能否占用处理器，什么时间能够占用处理器，必须由进程调度来决定。所以，作业调度选中 了一个作业且把它装入内存时，就应为该作业创建一个进程，若有多个作业被装入内存，则内存中同时存在多个进程，这些进程的初始状态为就绪状态。

##### 调度算法

- **先来先服务**

  当作业调度中采用该算法时，系统将按照作业到达的先后次序来进行调度，优先从后备队列中，选择一个或多个位于队列头部的作业，把他们调入内存，分配所需资源、创建进程，然后放入“就绪队列”,直到该进程运行到完成或发生某事件堵塞后，进程调度程序才将处理机分配给其他进程。

- **短作业优先**

  优先调度并处理短作业，所谓短是指作业的运行时间短。而在作业未投入运行时，并不能知道它实际的运行时间的长短，因此需要用户在提交作业时同时提交作业运行时间的估计值。

- **时间片轮转法**

  将系统中所有的就绪进程按照FCFS原则，排成一个队列。每次调度时将CPU分派给队首进程，让其执行一个时间片。时间片的长度从几个ms到几百ms。在一个时间片结束时，发生时钟中断。调度程序据此暂停当前进程的执行，将其送到就绪队列的末尾，并通过上下文切换执行当前的队首进程。

- **高响应比优先算法**

  高响应比优先调度算法既考虑作业的执行时间也考虑作业的等待时间

  响应比 =（等待时间+要求服务时间）/ 要求服务时间

#### 2.中级调度

##### 概念

引入中级调度的主要目的是为了提高内存的利用率和系统吞吐量，使得暂时不运行的进程从内存对换到外存上。

#### 3.低级调度（进程调度）

##### 概念

其主要功能是根据一定的算法将cpu分派给就绪队列中的一个进程。进程调度是操作系统中最基本的一种调度，其调度策略的优劣直接影响整个系统的性能。

**调度算法**

- **先进先出算法**

  按照进程进入就绪队列的先后次序来选择。即每当进入进程调度，总是把就绪队列的队首进程投入运行。

- **短进程优先**

  该算法也采用非剥夺策略，对预计执行时间短的进程优先分派处理机。通常后来的短进程不抢先正在执行的进程。

- **时间片轮转算法**

  该算法采用剥夺策略。让就绪进程以FCFS 的方式按时间片轮流使用CPU 的调度方式，即将系统中所有的就绪进程按照FCFS 原则，排成一个队列，每次调度时将CPU 分派给队首进程，让其执行一个时间片，时间片的长度从几个ms 到几百ms。在一个时间片结束时，发生时钟中断，调度程序据此暂停当前进程的执行，将其送到就绪队列的末尾，并通过上下文切换执行当前的队首进程，进程可以未使用完一个时间片，就出让CPU（如阻塞）

- **高响应比优先算法**

  

  

  

  

  